@ECHO OFF

IF NOT EXIST %1\DBLBUFF.SYS GOTO BADPATH
ATTRIB.EXE -S -H -R C:\IO.SYS

IF NOT EXIST C:\IO.BAK GOTO INST
IF NOT EXIST %1\DBLBUFF.BAK GOTO INST
IF NOT EXIST %1\SMARTDRV.BAK GOTO INST

IF NOT EXIST C:\IO.SYS GOTO MISSING
IF NOT EXIST %1\DBLBUFF.SYS GOTO MISSING
IF NOT EXIST %1\SMARTDRV.EXE GOTO MISSING

DEL C:\IO.SYS
DEL %1\DBLBUFF.SYS
DEL %1\SMARTDRV.EXE

REN C:\IO.BAK IO.SYS
REN %1\DBLBUFF.BAK DBLBUFF.SYS
REN %1\SMARTDRV.BAK SMARTDRV.EXE

ECHO TBPLUS DOS PATCHES REMOVED SUCCESSFULLY
GOTO EXIT
:DEERR
ECHO ERROR DELETING PATCH FILES
GOTO EXIT
:BKERR
ECHO ERROR RENAMING ORIGINAL FILES
GOTO EXIT
:INST

IF EXIST C:\IO.BAK GOTO MOD
IF EXIST %1\DBLBUFF.BAK GOTO MOD
IF EXIST %1\SMARTDRV.BAK GOTO MOD

ECHO TBPLUS DOS PATCHES NOT APPLIED - RUN INSTALLD TO INSTALL
GOTO EXIT
:MOD
ECHO ONE OR MORE FILES NOT PATCHED - UNINSTALL MANUALLY
GOTO EXIT
:MISSING
ECHO FILES MISSING OR DOS DAMAGED
GOTO EXIT
:BADPATH
ECHO DOS PATH INCORRECT OR DOS DAMAGED
GOTO EXIT
:EXIT
@ECHO ON
